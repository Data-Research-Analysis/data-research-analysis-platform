# =============================================================================
# Data Research Analysis Platform - Backend Environment Configuration
# =============================================================================
# This file contains environment variables for the backend Node.js/Express server.
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in the required values marked with [REQUIRED]
# 3. Configure external services (reCAPTCHA, AWS, email, etc.)
# 4. Set up database connections
# 5. Start the backend: npm run dev
#
# SECURITY WARNING: Never commit the actual .env file to version control!
# Contains sensitive credentials and API keys.
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------

# [REQUIRED] The port on which the backend server will run
PORT=3002

# [REQUIRED] Public URL for the backend API (used for CORS and webhooks)
PUBLIC_BACKEND_URL=http://localhost:3002

# Environment mode: development, staging, production
NODE_ENV=development

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------

# [REQUIRED] The secret key for reCAPTCHA verification
# Get from: https://www.google.com/recaptcha/admin
RECAPTCHA_SECRET=your_recaptcha_secret_key_here

# [REQUIRED] The secret key used for signing JWT tokens (minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=your_jwt_secret_key_here_minimum_32_characters

# Password hashing salt rounds (10-12 recommended for production)
PASSWORD_SALT=10

# [REQUIRED] Encryption key for sensitive data (connection details, credentials)
# MUST be 64 hexadecimal characters (32 bytes for AES-256)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# WARNING: Keep this key secure! Loss of this key means loss of encrypted data.
ENCRYPTION_KEY=your_64_character_hex_encryption_key_here_replace_this_with_generated_key

# Enable/disable encryption for connection details (true by default, set to false to disable)
ENCRYPTION_ENABLED=true

# -----------------------------------------------------------------------------
# Primary Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------

# Database driver type (currently supports: postgres)
DB_DRIVER=postgres

# [REQUIRED] PostgreSQL host for migrations (usually localhost for development)
POSTGRESQL_HOST_MIGRATIONS=localhost

# [REQUIRED] PostgreSQL host for runtime (docker service name or IP)
POSTGRESQL_HOST=database.dataresearchanalysis.test

# [REQUIRED] PostgreSQL port for migrations
POSTGRESQL_PORT_MIGRATIONS=5434

# [REQUIRED] PostgreSQL port for runtime
POSTGRESQL_PORT=5432

# [REQUIRED] PostgreSQL database username
POSTGRESQL_USERNAME=dra_user

# [REQUIRED] PostgreSQL database password
POSTGRESQL_PASSWORD=your_postgres_password_here

# [REQUIRED] PostgreSQL database name
POSTGRESQL_DB_NAME=dra_database

# -----------------------------------------------------------------------------
# External Database Connections (Optional - for data sources)
# -----------------------------------------------------------------------------

# MySQL database configuration for external data source connections
MYSQLDB_USER=mysql_user
MYSQLDB_ROOT_PASSWORD=your_mysql_password_here
MYSQLDB_DATABASE=mysql_database
MYSQLDB_LOCAL_PORT=3306
MYSQLDB_DOCKER_PORT=3306

# MariaDB database configuration for external data source connections
MARIADB_USER=mariadb_user
MARIADB_ROOT_PASSWORD=your_mariadb_password_here
MARIADB_DATABASE=mariadb_database
MARIADB_LOCAL_PORT=3307
MARIADB_DOCKER_PORT=3306

# -----------------------------------------------------------------------------
# Email Service Configuration
# -----------------------------------------------------------------------------

# Email service driver (mailtrap, sendgrid, ses, smtp)
MAIL_DRIVER=mailtrap

# [REQUIRED] Email service host
MAIL_HOST=sandbox.smtp.mailtrap.io

# [REQUIRED] Email service port
MAIL_PORT=2525

# [REQUIRED] Email service username/API key
MAIL_USER=your_email_username_here

# [REQUIRED] Email service password/API secret
MAIL_PASS=your_email_password_here

# [REQUIRED] From email address for outgoing emails
MAIL_FROM=noreply@dataresearchanalysis.com

# [REQUIRED] Reply-to email address
MAIL_REPLY_TO=support@dataresearchanalysis.com

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------

# Redis host (localhost for development, service name for docker)
REDIS_HOST=localhost

# Redis port
REDIS_PORT=6379

# Data driver for caching and sessions (redis recommended)
DATA_DRIVER=redis

# -----------------------------------------------------------------------------
# Socket.IO Real-time Communication
# -----------------------------------------------------------------------------

# Backend Socket.IO server URL (where backend runs)
SOCKETIO_SERVER_URL=http://localhost

# Backend Socket.IO server port (same as PORT usually)
SOCKETIO_SERVER_PORT=3002

# [REQUIRED] Frontend URL for CORS policy
SOCKETIO_CLIENT_URL=http://localhost

# [REQUIRED] Frontend port for CORS policy
SOCKETIO_CLIENT_PORT=3000

# -----------------------------------------------------------------------------
# AWS Services Configuration (Optional)
# -----------------------------------------------------------------------------

# AWS Access Key ID for S3, Textract, and other AWS services
# Get from: AWS IAM Console
AWS_ACCESS_KEY_ID=your_aws_access_key_id_here

# AWS Secret Access Key
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key_here

# AWS region for services (e.g., us-east-1, eu-west-1)
AWS_S3_REGION=us-east-1

# S3 bucket name for image extraction and file storage
AWS_S3_IMAGES_EXTRACT_BUCKET=your-s3-bucket-name-here

# -----------------------------------------------------------------------------
# Background Job Processing
# -----------------------------------------------------------------------------

# Interval for checking queue status (milliseconds)
QUEUE_STATUS_INTERVAL=5000

# Number of worker processes for background jobs
NUM_WORKERS=3

# -----------------------------------------------------------------------------
# Image Processing Configuration
# -----------------------------------------------------------------------------

# Default image page width for PDF processing (pixels)
IMAGE_PAGE_WIDTH=4000

# Default image page height for PDF processing (pixels)
IMAGE_PAGE_HEIGHT=6000

# -----------------------------------------------------------------------------
# AI Services Configuration
# -----------------------------------------------------------------------------

# [REQUIRED] Google Gemini API Key for AI Data Modeler
# The AI Data Modeler uses Google Gemini AI to generate intelligent data model templates
# Get your API key from: https://aistudio.google.com/app/apikey
# Required for: AI-powered data model generation with preset templates
GEMINI_API_KEY=your_gemini_api_key_here
